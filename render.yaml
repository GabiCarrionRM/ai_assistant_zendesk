services:
- type: web
  name: ai_assistant_zendesk
  runtime: python
  repo: https://github.com/GabiCarrionRM/ai_assistant_zendesk
  plan: starter
  envVars:
  - key: OPENAI_API_KEY
    sync: false
  - key: ASTRA_DB_APPLICATION_TOKEN
    sync: false
  - key: PYTHONPATH
    value: .
  - key: PYTHONUNBUFFERED
    value: "1"
  - key: LANGCHAIN_TRACING
    value: "false"
  region: oregon
  buildCommand: |
    pip install uv
    uv pip install --prerelease=allow -r requirements.txt
    # Fallback to regular pip if uv fails
    if [ $? -ne 0 ]; then
      echo "uv install failed, falling back to regular pip"
      pip install git+https://github.com/langflow-ai/langflow.git@dev
      pip install -r requirements.txt
    fi
    python -m patch_langflow
  startCommand: python startup_wrapper.py
version: "1"